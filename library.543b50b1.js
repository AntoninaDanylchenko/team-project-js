function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},l={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in l){var t=l[e];delete l[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){l[e]=t},t.parcelRequired7c6=a),a("8IXMh");var o=a("ewTWP");var r=e(a("amrNH")).template({1:function(e,t,n,l,a){var o,r=null!=t?t:e.nullContext||{},i=e.hooks.helperMissing,d="function",s=e.escapeExpression,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  <div class='library-wraper'>\n    <a\n      class='library-gallery__item'\n      href='#'\n      target='_blank'\n      rel='noopener noreferrer'\n    >\n\n      <img\n        src='"+s(typeof(o=null!=(o=c(n,"poster_path")||(null!=t?c(t,"poster_path"):t))?o:i)===d?o.call(r,{name:"poster_path",hash:{},data:a,loc:{start:{line:11,column:13},end:{line:11,column:28}}}):o)+"'\n        class='library-card__img'\n        alt='"+s(typeof(o=null!=(o=c(n,"title")||(null!=t?c(t,"title"):t))?o:i)===d?o.call(r,{name:"title",hash:{},data:a,loc:{start:{line:13,column:13},end:{line:13,column:22}}}):o)+s(typeof(o=null!=(o=c(n,"name")||(null!=t?c(t,"name"):t))?o:i)===d?o.call(r,{name:"name",hash:{},data:a,loc:{start:{line:13,column:22},end:{line:13,column:30}}}):o)+"'\n        id='"+s(typeof(o=null!=(o=c(n,"id")||(null!=t?c(t,"id"):t))?o:i)===d?o.call(r,{name:"id",hash:{},data:a,loc:{start:{line:14,column:12},end:{line:14,column:18}}}):o)+"'\n      />\n      <div class='library-info'>\n        <h3 class='library-info__title'>"+s(typeof(o=null!=(o=c(n,"title")||(null!=t?c(t,"title"):t))?o:i)===d?o.call(r,{name:"title",hash:{},data:a,loc:{start:{line:17,column:40},end:{line:17,column:49}}}):o)+s(typeof(o=null!=(o=c(n,"name")||(null!=t?c(t,"name"):t))?o:i)===d?o.call(r,{name:"name",hash:{},data:a,loc:{start:{line:17,column:49},end:{line:17,column:57}}}):o)+"</h3>\n        <div class='wrap-library'>\n          <p class='library-info__genre'>"+s(typeof(o=null!=(o=c(n,"genreFilmStr")||(null!=t?c(t,"genreFilmStr"):t))?o:i)===d?o.call(r,{name:"genreFilmStr",hash:{},data:a,loc:{start:{line:19,column:41},end:{line:19,column:57}}}):o)+"\n            |\n            "+s(typeof(o=null!=(o=c(n,"year")||(null!=t?c(t,"year"):t))?o:i)===d?o.call(r,{name:"year",hash:{},data:a,loc:{start:{line:21,column:12},end:{line:21,column:20}}}):o)+"</p>\n          <span class='film-rating'>"+s(typeof(o=null!=(o=c(n,"genreVoit")||(null!=t?c(t,"genreVoit"):t))?o:i)===d?o.call(r,{name:"genreVoit",hash:{},data:a,loc:{start:{line:22,column:36},end:{line:22,column:49}}}):o)+"</span>\n        </div>\n\n      </div>\n    </a>\n\n  </div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,l,a){var o;return null!=(o=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:0},end:{line:29,column:9}}}))?o:""},useData:!0});function i(){o.refs.galleryLibraryEl.innerHTML="",o.refs.btnWatched.classList.remove("active-lbr"),o.refs.btnQueue.classList.add("active-lbr");const e=JSON.parse(localStorage.getItem("Add-to-queue"));e&&e.length?(o.refs.noCard.classList.add("visually-hidden"),d(e)):o.refs.noCard.classList.remove("visually-hidden")}function d(e){const t=e.map((e=>{const t=e.genres.map((e=>e.name)).join(", "),n=e.vote_average.toFixed(1),l=e.release_date.slice(0,4);return{poster_path:e.poster_path,title:e.title,id:e.id,title:e.title,name:e.name,genreVoit:n,original_title:e.original_title,genreFilmStr:t,year:l}}));o.refs.galleryLibraryEl.innerHTML=r(t)}function s(){o.refs.galleryLibraryEl.innerHTML="",o.refs.btnQueue.classList.remove("active-lbr"),o.refs.btnWatched.classList.add("active-lbr");const e=JSON.parse(localStorage.getItem("Add-to-watched"));e&&e.length?(o.refs.noCard.classList.add("visually-hidden"),d(e)):o.refs.noCard.classList.remove("visually-hidden")}o.refs.btnQueue.addEventListener("click",i),o.refs.btnWatched.addEventListener("click",s),s(),a("2YGUk"),a("3J1up"),a("iAjJe");o=a("ewTWP");var c=a("lgp3Q");function u(e){let t="";if("film-card-addToWatched"===e.target.classList.value&&(t="Add-to-watched",console.log(t,22),console.log(p)),"film-card-addToQueue"===e.target.classList.value&&(t="Add-to-queue",console.log(t,23,e.target),console.log(p)),"Remove Film"===e.target.textContent){if("film-card-addToWatched"===e.target.classList.value){console.log("www");const t=v.findIndex((e=>e.id===p));v.splice(t,1),console.log(v),localStorage.setItem("Add-to-watched",JSON.stringify(v)),s(),e.target.textContent="Add to Watched"}if("film-card-addToQueue"===e.target.classList.value){console.log("qqq");const t=h.findIndex((e=>e.id===p));h.splice(t,1),console.log(h),localStorage.setItem("Add-to-queue",JSON.stringify(h)),i(),e.target.textContent="Add to Queue"}}if("Add to queue"===e.target.textContent){console.log("to queue");const t=v.find((e=>e.id===p));h=[...h,t],console.log(h),localStorage.setItem("Add-to-queue",JSON.stringify(h)),e.target.textContent="Remove Film"}if("Add to watched"===e.target.textContent){console.log("to watched"),console.log(v);const t=h.find((e=>e.id===p));v=[...v,t],console.log(v),localStorage.setItem("Add-to-watched",JSON.stringify(v)),e.target.textContent="Remove Film"}}function m(){o.refs.modalBackdrop.classList.remove("active"),o.refs.modalFilm.classList.remove("active"),document.body.classList.remove("body-is-hidden"),o.refs.modalFilmBtnClose.removeEventListener("click",m),document.removeEventListener("keydown",f),o.refs.modalBackdrop.removeEventListener("click",g)}function f(e){"Escape"===e.code&&m()}function g(e){e.target===o.refs.modalBackdrop&&m()}o.refs.galleryLibraryEl.addEventListener("click",(function(e){if(e.preventDefault(),"DIV"===e.target.nodeName)return;o.refs.filmCardEl.innerHTML="",document.body.classList.add("body-is-hidden"),o.refs.modalFilmBtnClose.addEventListener("click",m),document.addEventListener("keydown",f),o.refs.modalBackdrop.addEventListener("click",g);const t=e.target.id;return function(e){v=JSON.parse(localStorage.getItem("Add-to-watched")),h=JSON.parse(localStorage.getItem("Add-to-queue")),e=Number(e),p=e,v&&(v.find((t=>t.id===e))?o.refs.btnAddToWatch.textContent="Remove Film":o.refs.btnAddToWatch.textContent="Add to watched");h&&(h.find((t=>t.id===e))?o.refs.btnAddToaddToQueue.textContent="Remove Film":o.refs.btnAddToaddToQueue.textContent="Add to queue");o.refs.modalBackdrop.classList.add("active"),o.refs.modalFilm.classList.add("active"),v.find((t=>{if(t.id===e)return y(t)})),h.find((t=>{if(t.id===e)return y(t)}))}(t),t})),o.refs.btnAddToWatch.addEventListener("click",u),o.refs.btnAddToaddToQueue.addEventListener("click",u);let p="",v="",h="";function y(e){const t=e.genres.map((e=>e.name)).join(", "),n=e.vote_average.toFixed(1),l=Math.round(e.popularity),a={poster_path:e.poster_path,title:e.title,id:e.id,title:e.title,name:e.name,genreVoit:n,vote_count:e.vote_count,genrePopularity:l,original_title:e.original_title,genreStr:t,overview:e.overview};return console.log(a),o.refs.filmCardEl.innerHTML=(0,c.default)(a)}
//# sourceMappingURL=library.543b50b1.js.map
